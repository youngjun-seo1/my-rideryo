# 🏍️ Rideryo 도메인 지식

## 비즈니스 개요

Rideryo는 배달 라이더 관리 플랫폼으로, 라이더의 배차, 배달, 정산을 관리합니다.

## 핵심 도메인 용어

### 라이더 (Rider)
- **라이더**: 배달을 수행하는 배달원
- **라이더 상태**: `OFFLINE`, `ONLINE`, `DELIVERING`, `REST`
- **라이더 등급**: `ROOKIE`, `REGULAR`, `EXPERT`, `MASTER`
- **근무 시프트**: 라이더의 근무 시간대

### 배달 (Delivery)
- **배달 요청**: 가맹점에서 발생한 배달 건
- **배달 상태**: `REQUESTED`, `ASSIGNED`, `PICKED_UP`, `DELIVERING`, `COMPLETED`, `CANCELLED`
- **배차**: 배달 요청을 라이더에게 할당하는 행위
- **픽업**: 라이더가 가맹점에서 상품을 수령하는 행위

### 주문 (Order)
- **주문**: 고객이 요기요 앱에서 생성한 주문
- **가맹점**: 음식을 판매하는 업체
- **고객**: 음식을 주문한 사용자

### 정산 (Settlement)
- **배달료**: 라이더가 배달 건당 받는 금액
- **인센티브**: 추가 보상 (피크타임, 날씨 등)
- **정산 주기**: 일간/주간/월간

## 비즈니스 규칙

### 배차 규칙
1. ONLINE 상태의 라이더만 배차 가능
2. 동시 배달 건수 제한 (최대 3건)
3. 라이더 위치 기반 최적 배차
4. 라이더 등급에 따른 우선 배차

### 배달 규칙
1. 픽업 후 30분 내 배달 완료 권장
2. 배달 지연 시 고객 자동 알림
3. 배달 완료 시 고객 서명/사진 증빙

### 정산 규칙
1. 기본 배달료 + 거리 추가 요금
2. 피크타임/악천후 인센티브 적용
3. 주간 정산 (매주 화요일)

## 도메인 이벤트

| 이벤트 | 발생 시점 | 연관 서비스 |
|--------|----------|------------|
| `RiderStatusChanged` | 라이더 상태 변경 시 | rider, delivery |
| `DeliveryRequested` | 배달 요청 생성 시 | order, delivery |
| `DeliveryAssigned` | 배차 완료 시 | delivery, notification |
| `DeliveryCompleted` | 배달 완료 시 | delivery, settlement |
| `OrderReceived` | 주문 수신 시 | order, delivery |

## ERD 개요

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Rider     │────▶│  Delivery   │◀────│    Order    │
└─────────────┘     └─────────────┘     └─────────────┘
       │                   │
       │                   │
       ▼                   ▼
┌─────────────┐     ┌─────────────┐
│   Shift     │     │  Location   │
└─────────────┘     └─────────────┘
```

