# ğŸ—ï¸ Rideryo MSA ì•„í‚¤í…ì²˜

## ì„œë¹„ìŠ¤ êµ¬ì„±

```text
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  API Gateway    â”‚
                    â”‚  (gateway-api)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ rider-service â”‚   â”‚delivery-serviceâ”‚   â”‚ order-service â”‚
â”‚   (ë¼ì´ë”)     â”‚   â”‚   (ë°°ë‹¬)       â”‚   â”‚   (ì£¼ë¬¸)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚notification-service â”‚
                 â”‚      (ì•Œë¦¼)         â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì„œë¹„ìŠ¤ë³„ ì±…ì„

### 1. gateway-api

- **ì—­í• **: API ë¼ìš°íŒ…, ì¸ì¦/ì¸ê°€
- **í¬íŠ¸**: 8080
- **ê¸°ìˆ **: Spring Cloud Gateway

### 2. rider-service

- **ì—­í• **: ë¼ì´ë” ë“±ë¡, ìƒíƒœ ê´€ë¦¬, ì‹œí”„íŠ¸ ê´€ë¦¬
- **í¬íŠ¸**: 8081
- **DB**: PostgreSQL (rider_db)
- **ì£¼ìš” API**:
  - `POST /riders` - ë¼ì´ë” ë“±ë¡
  - `PUT /riders/{id}/status` - ìƒíƒœ ë³€ê²½
  - `GET /riders/available` - ê°€ìš© ë¼ì´ë” ì¡°íšŒ

### 3. delivery-service

- **ì—­í• **: ë°°ë‹¬ ìƒì„±, ë°°ì°¨, ë°°ë‹¬ ìƒíƒœ ê´€ë¦¬
- **í¬íŠ¸**: 8082
- **DB**: PostgreSQL (delivery_db)
- **ì£¼ìš” API**:
  - `POST /deliveries` - ë°°ë‹¬ ìƒì„±
  - `POST /deliveries/{id}/assign` - ë°°ì°¨
  - `PUT /deliveries/{id}/status` - ìƒíƒœ ë³€ê²½

### 4. order-service

- **ì—­í• **: ì£¼ë¬¸ ìˆ˜ì‹ , ê°€ë§¹ì /ê³ ê° ì •ë³´ ê´€ë¦¬
- **í¬íŠ¸**: 8083
- **DB**: PostgreSQL (order_db)
- **ì£¼ìš” API**:
  - `POST /orders` - ì£¼ë¬¸ ìƒì„±
  - `GET /orders/{id}` - ì£¼ë¬¸ ì¡°íšŒ

### 5. notification-service

- **ì—­í• **: í‘¸ì‹œ ì•Œë¦¼, SMS, ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡
- **í¬íŠ¸**: 8084
- **ê¸°ìˆ **: Firebase FCM, AWS SNS
- **ì£¼ìš” API**:
  - `POST /notifications/push` - í‘¸ì‹œ ë°œì†¡
  - `POST /notifications/sms` - SMS ë°œì†¡

## ì„œë¹„ìŠ¤ ê°„ í†µì‹ 

### ë™ê¸° í†µì‹  (REST)

- Gateway â†’ ê° ì„œë¹„ìŠ¤
- delivery-service â†’ rider-service (ë¼ì´ë” ì¡°íšŒ)

### ë¹„ë™ê¸° í†µì‹  (Event)

- **Message Broker**: Apache Kafka
- **í† í”½ ì„¤ê³„**:
  - `rider.status.changed`
  - `delivery.requested`
  - `delivery.assigned`
  - `delivery.completed`
  - `order.received`

## ë°ì´í„° íë¦„

### ë°°ë‹¬ ìš”ì²­ íë¦„

```text
1. order-service: ì£¼ë¬¸ ìˆ˜ì‹  â†’ OrderReceived ì´ë²¤íŠ¸ ë°œí–‰
2. delivery-service: ì´ë²¤íŠ¸ ìˆ˜ì‹  â†’ ë°°ë‹¬ ìƒì„±
3. delivery-service: ìµœì  ë¼ì´ë” ì¡°íšŒ (rider-service)
4. delivery-service: ë°°ì°¨ â†’ DeliveryAssigned ì´ë²¤íŠ¸ ë°œí–‰
5. notification-service: ë¼ì´ë”ì—ê²Œ í‘¸ì‹œ ì•Œë¦¼
6. rider-service: ë¼ì´ë” ìƒíƒœë¥¼ DELIVERINGìœ¼ë¡œ ë³€ê²½
```

## ì¸í”„ë¼ êµ¬ì„±

- **ì»¨í…Œì´ë„ˆ**: Docker + Kubernetes
- **ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬**: Kubernetes Service
- **ì„¤ì • ê´€ë¦¬**: ConfigMap, Secrets
- **ë¡œê¹…**: ELK Stack
- **ëª¨ë‹ˆí„°ë§**: Prometheus + Grafana
- **ì¶”ì **: Jaeger (ë¶„ì‚° ì¶”ì )
