# 🔄 기능 개발 워크플로우

## 개요

새로운 기능을 개발할 때 따라야 하는 표준 워크플로우입니다.

## 워크플로우 단계

```
┌─────────────────────────────────────────────────────────────────┐
│                     기능 개발 워크플로우                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 요구사항    2. TPM 설계    3. 팀 검토    4. MSA 설계         │
│     분석          (1차)         (필수!)        (집중)           │
│      │             │             │              │              │
│      ▼             ▼             ▼              ▼              │
│  ┌──────┐     ┌──────┐      ┌──────┐       ┌──────┐           │
│  │요구사항│ ──▶ │영향도│ ──▶  │설계  │ ──▶   │상세  │           │
│  │ 정리  │     │분석  │      │검토  │       │설계  │           │
│  └──────┘     └──────┘      └──────┘       └──────┘           │
│                                              │                │
│                                              ▼                │
│  6. 코드    5. 구현       ◀────────────   MSA별              │
│     리뷰                                   구현               │
│      │                                                       │
│      ▼                                                       │
│  ┌──────┐     ┌──────┐                                       │
│  │ PR   │ ──▶ │배포  │                                       │
│  │리뷰  │     │     │                                        │
│  └──────┘     └──────┘                                       │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

## 단계별 상세

### 1️⃣ 요구사항 분석

**담당**: 엔지니어 + TPM AI

```markdown
## 요청 예시
"라이더의 실시간 위치를 고객이 볼 수 있게 해주세요"

## TPM AI에게 요청
@tpm 다음 요구사항을 분석해주세요:
- 라이더 실시간 위치 추적
- 고객 앱에서 배달 현황 지도 표시
- 1분 간격 위치 갱신
```

**산출물**: 요구사항 정의서

### 2️⃣ TPM 설계 (1차 설계)

**담당**: TPM AI

```markdown
## TPM AI 산출물
1. 영향도 분석표
2. 서비스별 책임 분배
3. 시퀀스 다이어그램
4. 이벤트 설계
5. 배포 계획 초안
```

**체크리스트**:
- [ ] 영향받는 모든 MSA 식별됨
- [ ] MSA 간 책임이 명확함
- [ ] 이벤트 흐름이 정의됨
- [ ] 데이터 소유권이 명확함

### 3️⃣ 팀 검토 (필수!)

**담당**: 엔지니어 전원

> ⚠️ **이 단계를 건너뛰지 마세요!**
> TPM AI의 설계가 항상 옳지 않습니다.

**검토 질문**:
1. "이 데이터는 정말 이 MSA가 관리해야 할까?"
2. "MSA 간 호출 순서가 적절한가?"
3. "클린 아키텍처 관점에서 책임 분배가 올바른가?"
4. "기존 기능과 충돌하는 부분은 없는가?"
5. "성능/확장성 문제는 없는가?"

**산출물**: 검토 완료된 설계 문서

### 4️⃣ MSA 설계 (집중 설계)

**담당**: 각 MSA AI

```markdown
## rider-service 집중 설계 요청
@rider TPM AI 설계를 기반으로 상세 설계를 해주세요:
- API 스펙 상세화
- 도메인 모델 변경 사항
- 테스트 케이스 정의
```

**각 MSA AI 산출물**:
1. API 상세 스펙
2. 도메인 모델 변경
3. 데이터베이스 마이그레이션
4. 테스트 케이스

### 5️⃣ 구현

**담당**: 각 MSA AI + 엔지니어

```markdown
## 구현 순서
1. 도메인 모델 구현
2. 유스케이스 구현
3. 어댑터 구현
4. 테스트 작성
5. 통합 테스트
```

**코딩 규칙**:
- 클린 아키텍처 패턴 준수
- 테스트 커버리지 80% 이상
- 코드 컨벤션 준수

### 6️⃣ 코드 리뷰

**담당**: 엔지니어 + AI

**리뷰 체크리스트**:
- [ ] 클린 아키텍처 준수
- [ ] 비즈니스 규칙 정확성
- [ ] 테스트 커버리지
- [ ] 에러 처리
- [ ] 성능 고려

### 7️⃣ 배포

**담당**: 엔지니어

```markdown
## 배포 체크리스트
- [ ] 모든 테스트 통과
- [ ] 코드 리뷰 승인
- [ ] 배포 순서 확인 (TPM 설계 기준)
- [ ] 롤백 계획 확인
- [ ] 모니터링 대시보드 준비
```

## 긴급 핫픽스 워크플로우

```
버그 발견 → 영향도 빠른 분석 → 핫픽스 구현 → 긴급 리뷰 → 배포
```

- TPM 설계 단계 생략 가능
- 단, 영향 범위가 단일 MSA인 경우에만
- 여러 MSA 영향 시 표준 워크플로우 따름

